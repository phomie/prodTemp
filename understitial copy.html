<html>

<head>
    <script>
        var contenttyp = window.parent.atf.getContentType();
        var basehosttry = window.location.hostname.split(".")[0];
        if (basehosttry == "www") {
            basehost = window.location.hostname.split(".")[1];
        } else {
            basehost = window.location.hostname.split(".")[0];
        }
        var creativeType = "understitial";
        if (basehost.includes("-")) {
            basehost2 = basehost.split("-");
            basehost3 = basehost2.join("");
            dataToRetrieve = basehost3;
        } else {
            dataToRetrieve = basehost;
        }
        if (basehosttry == "focus-arztsuche") {
            var theobjecttofind = "creativeSettings" + dataToRetrieve;
            var obj = window.parent[theobjecttofind];
            console.log('obj', obj);
        } else {
            var obj = window.parent.creativeSettings;
        }
        var creativetypte = creativeType;

        function GetPropertyValue(object, dataToRetrieve, contenttyp, creativetypte) {
            return obj[dataToRetrieve][contenttyp][creativetypte];
        }
        understitialobj = GetPropertyValue(obj, dataToRetrieve, contenttyp, creativetypte);
        var env = '[%enviroment%]';
        if (env == "desktop") {
            console.log("desktopenv");
            formatWidth = understitialobj.whichcase[0].desktop[0].contwidth;
            formatHeight = understitialobj.whichcase[0].desktop[0].contheight;
            bottomobj = understitialobj.whichcase[0].desktop[0].bottom;
            lefty = understitialobj.whichcase[0].desktop[0].left;
            frambot = understitialobj.whichcase[0].desktop[0].frambot;
        } else if (env = "mobile") {
            console.log("mobileenv");
            formatWidth = understitialobj.whichcase[0].mobile[0].contwidth;
            formatHeight = understitialobj.whichcase[0].mobile[0].contheight;
            bottomobj = understitialobj.whichcase[0].mobile[0].bottom;
            lefty = understitialobj.whichcase[0].mobile[0].left;
            frambot = understitialobj.whichcase[0].mobile[0].frambot;
        }
        var frameElem = frameElement;
        console.log('frameElem', frameElem);
        var frameContainer = frameElem.parentElement;
        var atfadvertisementmessage = document.createElement("div");
        atfadvertisementmessage.setAttribute("style", "background: rgb(0, 0, 0); color: rgb(255, 255, 255); position: absolute; z-index: 4; top: 0px; left: 0px; right: 0px; width: auto; margin: 0px; padding: 5px; text-align: center; text-transform: uppercase; font: 10px / 10px Helvetica, Arial, sans-serif; box-shadow: black 0px 1px 10px;");
        var adtext = document.createTextNode("ADVERTISMENT");
        atfadvertisementmessage.appendChild(adtext);
        frameContainer.appendChild(atfadvertisementmessage);
        var atfadvertisementmessage1 = document.createElement("div");
        atfadvertisementmessage1.setAttribute("style", "background: rgb(0, 0, 0); color: rgb(255, 255, 255); position: absolute; z-index: 3; bottom:" + bottomobj + "px; left: 0px; right: 0px; width: auto; margin: 0px; padding: 5px; text-align: center; text-transform: uppercase; font: 10px / 10px Helvetica, Arial, sans-serif; box-shadow: black 0px -1px 10px;");
        var adtext1 = document.createTextNode("Scroll to continue with content");
        atfadvertisementmessage1.appendChild(adtext1);
        frameContainer.appendChild(atfadvertisementmessage1);
        var frameContainerParent = frameContainer.parentElement;
        var frameContainerParentParent = frameContainer.parentElement.parentElement.parentElement;
        thedivtoadjust = frameContainerParent.firstChild;
        console.log('thedivtoadjust', thedivtoadjust);
        thedivtoadjust.style.height = 870 + 'px !important';
        thedivtoadjust.style.backgroundColor = "[%bckgrdcol%]";
        frameContainerParentParent.style.position = 'relative';
        frameContainerParentParent.style.height = 870 + 'px';
        var parentWin = parent.window;
        var video = false;
        var bottomPosition = 0;
        var frameCorrectedLeft = false;
        var frameContainerParentBCRTop, frameElemBCRTop, topPosition, footers, siteHeader;
        frameElem.style.margin = '0';
        frameElem.style.padding = '0';
        frameElem.style.border = 'none';
        frameElem.style.position = 'fixed';
        frameElem.width = formatWidth + 'px';
        frameElem.height = formatHeight + 'px';
        frameContainer.style.position = 'absolute';
        frameContainer.style.clip = 'rect(auto, auto, auto, auto)';
        frameContainer.style.width = '100%';
        frameContainer.style.margin = '0 auto';
        frameContainer.style.height = formatHeight + 'px';
        frameContainer.style.width = '100%';
        frameContainerParent.style.position = 'relative';
        frameContainerParent.style.height = formatHeight + 'px';
        parentWin.onscroll = function() {
            scrollHandling();
        };
        parentWin.onresize = function() {
            scrollHandling();
        };

        function scrollHandling() {
            frameContainerParentBCRTop = frameContainerParent.getBoundingClientRect().top;
            frameElemBCRTop = frameElem.getBoundingClientRect().top;
            footers = parent.document.querySelectorAll('footer');
            if (typeof footers != 'undefined' && footers !== null) {
                if (footers.length > 0) {
                    for (var footerCnt = 0; footerCnt < footers.length; footerCnt++) {
                        computedStyles = parentWin.getComputedStyle(footers[footerCnt]);
                        if (computedStyles.getPropertyValue('position') === 'fixed') {
                            bottomPosition = footers[footerCnt].offsetHeight;
                        }
                    }
                }
            }
            frameElem.style.bottom = bottomPosition + 'px';
            console.log(' i am inside DESKTOPELSE ');
            if (frameContainerParentBCRTop <= frameElemBCRTop && frameContainerParentBCRTop <= topPosition && frameContainerParentBCRTop <= (parentWin.innerHeight - frameContainerParent.offsetHeight - bottomPosition)) {
                console.log('DESKTOPELSE _1');
                frameElem.style.position = 'fixed';
                frameElem.style.bottom = (((window.top.innerHeight) - frambot) / 2) + 5 + "px";
                frameElem.style.left = frameContainer.getBoundingClientRect().left + ((formatWidth - lefty) / 2) + "px";
                if (video) {
                    console.log('DESKTOPELSE _2_VIDEO');
                    frameElem.style.left = frameContainer.getBoundingClientRect().left + ((671 - 650) / 2) + "px";
                    video.style.position = 'fixed';
                }
            } else if (frameContainerParentBCRTop <= (parentWin.innerHeight - frameContainerParent.offsetHeight - bottomPosition)) {
                console.log('DESKTOPELSE _3');
                frameElem.style.bottom = (((window.top.innerHeight) - frambot) / 2) + 5 + "px";
                frameElem.style.position = 'fixed';
                frameElem.style.left = frameContainer.getBoundingClientRect().left + ((formatWidth - lefty) / 2) + "px";
                if (video) {
                    console.log('DESKTOPELSE _4_VIDEO');
                    video.style.position = 'absolute';
                }
            } else {
                console.log('DESKTOPELSE _5');
                frameElem.style.position = 'fixed';
                frameElem.style.bottom = (((window.top.innerHeight) - frambot) / 2) + 5 + "px";
                frameElem.style.left = frameContainer.getBoundingClientRect().left + ((formatWidth - lefty) / 2) + "px";
                if (video) {
                    video.style.position = 'fixed';
                }
            }
        }
    </script>


</head>

<body>
    <div id="atf-understitial-ad" target="_blank"></div>
    <script>
        jsredirect = `[%3rdParty%]`;
        image = "[%IMAGE%]";
        var ad = document.getElementById('atf-understitial-ad');
        if (image) {
            theimg = document.createElement('img');
            theimg.src = image;
            theclick = document.createElement("a");
            theclick.setAttribute('href', '%%CLICK_URL_UNESC%%[%Hyperlink%]');
            theclick.setAttribute("target", "_blank");
            theclick.appendChild(theimg);
            ad.appendChild(theclick)
        }
        if ('[%Hyperlink%]' !== '') {
            ad.setAttribute('href', '%%CLICK_URL_UNESC%%[%Hyperlink%]');
        } else {
            ad.addEventListener('click touch', function(event) {
                event.preventDefault();
            });
        }
        if (jsredirect) {
            thecrativecodes = document.createElement("script");
            thecrativecodes.innerHTML = `document.write("<scr" + "ipt src='` + jsredirect + `'></scr" + "ipt>");`;
            ad.appendChild(thecrativecodes)
        }
        if ('[%Video%]' !== '') {
            var videoWidth = '[%VideoWidth%]' !== '' && '[%VideoWidth%]' > 0 ? '[%VideoWidth%]' + 'px' : 'auto';
            ad.insertAdjacentHTML('beforeend', '<video id="atf-ad-video" style="margin-top: ' + videoPos + '; transform: translate(-50%, -50%); top: 50%; lefT: 50%; max-width: ' + frameElem.width + ';" height="auto" width="' + videoWidth + '" loop muted autoplay plays-inline><source src="[%Video%]" type="video/mp4" codecs="H.264/MPEG-4"/></video>');
            video = document.getElementById('atf-ad-video');
        }
        frameContainerParent.style.height = frameElem.height + 'px';
        frameContainer.style.height = frameElem.height + 'px';
        if (/rv:11.0/i.test(navigator.userAgent)) {
            frameContainerParent.addEventListener('mouseover', function() {
                frameContainerParent.style.cursor = 'pointer';
            });
            frameContainerParent.addEventListener('click', function() {
                var frameLinks = document.querySelectorAll('[target="_blank"]');
                for (var link = 0; link < frameLinks.length; link++) {
                    if (frameLinks[link].href !== '') {
                        parentWin.open(frameLinks[link].href, '_blank');
                        return false;
                    }
                }
            });
        }
        if (formatWidth == '300') {
            if ("%%SITE%%".indexOf("daskochrezept.de") !== -1) {
                frameContainerParent.parentElement.parentElement.style.width = '100%';
            } else if ("%%SITE%%".indexOf("bunte.de") !== -1) {
                frameContainerParent.parentElement.style.width = '100%';
            }
        }
        if ("%%SITE%%".indexOf("bunte.de") !== -1) {
            frameContainerParent.style.marginBottom = '10px';
        }
        setTimeout(function() {
            scrollHandling();
        }, 20);
        if (formatWidth == '300') {
            if (video) {
                if ("%%SITE%%".indexOf("freundin.de") !== -1) {
                    video.style.display = 'none';
                    video.style.display = 'block';
                }
            }
        }
    </script>
</body>

</html>